-------------------------------------------------------------------------------------------------------------
--------------report-service это REST сервис для построения отчетов jasper.----------------------------------
-------------------------------------------------------------------------------------------------------------


основной причиной разработки сервиса было не возможность настроить основную систему, таким 
образом, что бы можно было запустить "объемный" отчет на jasper.

report-service является компонентом системы "Построения отчетов" реализующий непосредственно 
построение отчетов jasper. (в состав системы так же входит сервис report-service-balancer, 
который находится еще в разработке)

report-service сервис ориентирован на запуск в контейнере

в состав сервиса входит: сервис report-service, база данных конфигурации сервиса postgres, 
база данных основной системы, ftp-сервер для доступа к шаблонам отчетов, файлам отчетов, логам

в сервисе реализовано построение отчета в пуле потоков заданного объема. при попытке выполнить 
отчет сверх этого лимита сервис вернет ошибку 503

сервис позволяет построить отчет как синхронно, так и асинхронно

у сервиса есть документация swagger описывающая интерфейс сервиса http://server_name:server_port/swagger-ui.html

-------------------------------------------------------------------------------------------------------------
кратко о сервисе

реализовано 2 интерфейса:
асинхронный http://server_name:server_port/report-service/report/execute-async/{reportId}
синхронный  http://server_name:server_port/report-service/report/execute/{reportId}

оба интерфейса ожидают на вход сообщение с RequestBody в формате JSON (Map<String,Object> параметров jasper отчета):

{
  "reportProp1": "propValue1",
  "reportProp2": 123,
  "reportProp3": 10.01,
  "reportProp3": {"prop1": "val1", "prop2": "val2"}
}

каждый отчет, запускаемый сервисом будет выполнен в отдельном потоке пула потоков. настройки пула настраиваются при запуске сервиса.
если в пуле нет доступного потока сервис вернет страницу со статусом 503.
-------------------------------------------------------------------------------------------------------------
кратко о бд конфигурации

в базе 2 таблицы
reports - настройки доступных отчетов для построения и их настройки
virtualaizer_properties - настройки jasper virtualaizer.
-------------------------------------------------------------------------------------------------------------
кратко о сборке сервиса
собрать проект с помощью maven (например командой install)
-------------------------------------------------------------------------------------------------------------
кратко о запуске сервиса

на сервер где есть установленный docker, docker-compose необходимо скопировать в заранее 
созданную(любую в любом месте) директорию файлы:
* docker-compose.yml и Dockerfile
* папку sql(с вложенным файлом)
* файл упакованного проекта (.target\report-service-0.0.1.jar)
 
находясь в вышеупомянутой папке запустить команду 'docker-compose up --build report-service'

на базе target после установки создать схему oracle_user
нужно будет подготовить jasper report для работы с таблицами target.oracle_user

  
 




 



